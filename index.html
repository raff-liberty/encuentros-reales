<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[DEV] Encuentros Reales - Plataforma de Encuentros Adultos</title>
    <link rel="stylesheet" href="styles-new.css?v=2.0">
    <link rel="stylesheet" href="components.css">
</head>

<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen active">
        <div class="splash-content">
            <div class="splash-icon">üîû</div>
            <h1 class="splash-title">Encuentros Reales</h1>
            <p class="splash-subtitle">Plataforma para encuentros reales entre adultos reales</p>
            <div class="splash-warning">
                <p>‚ö†Ô∏è Esta plataforma es exclusivamente para mayores de 18 a√±os</p>
                <p>Todos los usuarios son verificados y todos los encuentros son reales</p>
                <p>No se permiten perfiles falsos ni usuarios fantasma</p>
            </div>
            <button class="btn btn-primary btn-large" onclick="app.closeSplash()">Entrar a la Plataforma</button>
        </div>
    </div>

    <!-- App Container -->
    <div id="app-container" class="app-container hidden">
        <!-- Header -->
        <header class="header">
            <div class="user-greeting">
                <div class="user-avatar" id="header-avatar" onclick="app.showView('profile')" style="cursor: pointer;">
                    <span id="header-avatar-icon">üë§</span>
                </div>
                <div class="user-info" onclick="app.showView('profile')" style="cursor: pointer;">
                    <h3 id="header-username">Usuario</h3>
                    <p id="header-role">Rol</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="icon-btn hidden" id="header-create-event" onclick="app.showCreateEvent()"
                    title="Crear Evento">‚ûï</button>
                <button class="icon-btn" id="notifications-btn" onclick="app.toggleNotifications()"
                    title="Notificaciones">
                    üîî
                    <span id="notifications-badge" class="notification-badge hidden">0</span>
                </button>
                <button class="icon-btn" title="Configuraci√≥n" onclick="app.showView('profile')">‚öôÔ∏è</button>
                <button class="icon-btn" onclick="app.logout()" title="Salir">üö™</button>
            </div>
        </header>

        <!-- Panel de Notificaciones -->
        <div id="notifications-panel" class="notifications-panel hidden">
            <div class="notifications-header">
                <h3>Notificaciones</h3>
                <button class="btn btn-text btn-small" onclick="app.markAllNotificationsAsRead()">Marcar todas como
                    le√≠das</button>
            </div>
            <div id="notifications-list" class="notifications-list">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <a href="#" class="nav-tab" data-view="explore" onclick="app.showView('explore')">
                <span>üîç</span>
                <span>Explorar</span>
                <span class="badge" id="explore-count">0</span>
            </a>
            <a href="#" class="nav-tab" data-view="applications" onclick="app.showView('applications')">
                <span>üë•</span>
                <span>Mis Postulaciones</span>
                <span class="badge" id="applications-count">0</span>
            </a>
            <a href="#" class="nav-tab" data-view="favorites" onclick="app.showView('favorites')">
                <span>‚ù§Ô∏è</span>
                <span>Favoritos</span>
            </a>
            <a href="#" class="nav-tab" data-view="blog" onclick="app.showView('blog')">
                <span>üìù</span>
                <span>Blog</span>
            </a>
            <a href="#" class="nav-tab" data-view="profile" onclick="app.showView('profile')">
                <span>üë§</span>
                <span>Mi Perfil</span>
            </a>
            <a href="#" class="nav-tab hidden" data-view="admin" onclick="app.showView('admin')">
                <span>‚öôÔ∏è</span>
                <span>Admin</span>
            </a>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Vista: Explorar Eventos -->
            <div id="view-explore" class="view hidden">
                <div class="page-header">
                    <div>
                        <h1>Eventos disponibles</h1>
                        <p>Encuentra el encuentro perfecto para ti</p>
                    </div>
                    <button class="btn btn-secondary" onclick="app.toggleFilters()">
                        <span>üîΩ</span>
                        Filtros
                    </button>
                </div>

                <!-- Filtros -->
                <div id="filters-panel" class="filters-panel hidden">
                    <div class="card">
                        <h3 style="margin-bottom: var(--spacing-md);">Filtrar eventos</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
                            <div class="form-group">
                                <label>Tipo de evento</label>
                                <select id="filter-type">
                                    <option value="">Todos</option>
                                    <option value="TRADICIONAL">Tradicional</option>
                                    <option value="SUMISO">Sumiso</option>
                                    <option value="ESTRUCTURADO">Estructurado</option>
                                    <option value="LIBERAL">Liberal</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Zona</label>
                                <select id="filter-zone">
                                    <option value="">Todas</option>
                                    <option value="norte">Norte</option>
                                    <option value="sur">Sur</option>
                                    <option value="este">Este</option>
                                    <option value="oeste">Oeste</option>
                                    <option value="centro">Centro</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Nivel de Gangbang</label>
                            <select id="filter-gangbang">
                                <option value="">Cualquiera</option>
                                <option value="SUAVE">Suave</option>
                                <option value="MEDIO">Medio</option>
                                <option value="INTENSO">Intenso</option>
                                <option value="EXTREMO">Extremo</option>
                            </select>
                        </div>
                        <div
                            style="display: flex; justify-content: flex-end; gap: var(--spacing-sm); margin-top: var(--spacing-md);">
                            <button class="btn btn-secondary" onclick="app.toggleFilters()">Cancelar</button>
                            <button class="btn btn-primary" onclick="app.applyFilters()">Aplicar Filtros</button>
                        </div>
                    </div>
                </div>

                <!-- Estad√≠sticas del usuario -->
                <div class="stats-grid" id="user-stats">
                    <!-- Se llenar√°n din√°micamente -->
                </div>

                <!-- Lista de eventos -->
                <div class="events-grid" id="events-list">
                    <!-- Se llenar√°n din√°micamente -->
                </div>
            </div>

            <!-- Vista: Mis Postulaciones -->
            <div id="view-applications" class="view hidden">
                <h1>Mis postulaciones</h1>
                <div class="events-grid" id="applications-list">
                    <!-- Se llenar√°n din√°micamente -->
                </div>
            </div>

            <!-- Vista: Favoritos -->
            <div id="view-favorites" class="view hidden">
                <h1>Favoritos</h1>
                <div class="events-grid" id="favorites-list">
                    <!-- Se llenar√°n din√°micamente -->
                </div>
            </div>

            <!-- Vista: Blog -->
            <div id="view-blog" class="view hidden">
                <div class="page-header">
                    <div>
                        <h1>üìù Blog</h1>
                        <p>Art√≠culos y novedades de la comunidad</p>
                    </div>
                </div>
                <div class="blog-grid" id="blog-list">
                    <!-- Se llenar√°n din√°micamente -->
                </div>
            </div>

            <!-- Vista: Mi Perfil -->
            <div id="view-profile" class="view hidden">
                <div id="profile-container">
                    <!-- Se llenar√° din√°micamente -->
                </div>
            </div>

            <!-- Vista: Admin -->
            <div id="view-admin" class="view hidden">
                <div class="page-header">
                    <h1>Panel de Administraci√≥n</h1>
                </div>

                <div class="admin-dashboard">
                    <!-- Verification Queue -->
                    <div class="card full-width">
                        <div class="card-header">
                            <h3>üîç Solicitudes de Registro (Pendientes)</h3>
                        </div>
                        <div class="table-container">
                            <table class="data-table" id="verification-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Usuario</th>
                                        <th>Rol</th>
                                        <th>Edad/Provincia</th>
                                        <th>Fotos</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="verification-list">
                                    <!-- Dynamic Content -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Modal Verificaci√≥n Detalle (Internal to Admin View) -->
                    <div id="verify-modal" class="modal">
                        <div class="modal-content" style="max-width: 900px;">
                            <h2>Revisi√≥n de Identidad</h2>
                            <div id="verify-user-details"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                                <!-- Details here -->
                            </div>
                            <div class="modal-actions">
                                <button class="btn btn-secondary"
                                    onclick="document.getElementById('verify-modal').classList.remove('active')">Cancelar</button>
                                <button class="btn btn-error" id="btn-reject-user">Rechazar</button>
                                <button class="btn btn-success" id="btn-approve-user">Aprobar & Verificar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista: Gesti√≥n de Evento (Oferente) -->
            <div id="view-event-manage" class="view hidden">
                <div id="event-manage-container">
                    <!-- Se llenar√° din√°micamente -->
                </div>
            </div>
            <!-- Vista: Panel de Admin -->
            <div id="view-admin" class="view hidden"></div>
        </main>
    </div>

    <!-- Modal: Login/Registro (Wizard System) -->
    <div id="auth-modal" class="modal active">
        <div class="modal-content auth-card wizard-container">
            <!-- Header del Modal -->
            <div class="auth-header">
                <h2 id="auth-title">Bienvenido</h2>
                <div class="wizard-progress hidden" id="wizard-progress">
                    <div class="step-dot active" data-step="1">1</div>
                    <div class="step-line"></div>
                    <div class="step-dot" data-step="2">2</div>
                    <div class="step-line"></div>
                    <div class="step-dot" data-step="3">3</div>
                </div>
            </div>

            <!-- VISTA DE LOGIN (Default) -->
            <div id="view-login" class="wizard-step active">
                <form id="login-form" onsubmit="app.handleLogin(event)">
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" required placeholder="tu@email.com">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Contrase√±a</label>
                        <input type="password" id="login-password" required placeholder="********">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block btn-large">Entrar</button>

                    <div class="auth-separator">o</div>

                    <button type="button" class="btn btn-secondary btn-block" onclick="app.startRegistration()">
                        Crear Cuenta Nueva
                    </button>
                </form>
            </div>

            <!-- WIZARD PASO 1: PRESENTACI√ìN Y ROL -->
            <div id="reg-step-1" class="wizard-step">
                <!-- ... content of step 1 ... -->
                <div class="presentation-text">
                    <h3>Nuestra Misi√≥n</h3>
                    <p>Encuentros Reales es un espacio seguro y verificado para adultos que buscan conexiones
                        aut√©nticas. Valoramos la honestidad, el respeto y la privacidad.</p>
                    <ul style="text-align: left; margin: 15px 0; padding-left: 20px; line-height: 1.6;">
                        <li>Encuentros reales, no fantas√≠as.</li>
                        <li>Usuarios verificados.</li>
                        <li>Seguridad y comportamiento responsable.</li>
                        <li>Experiencias claras, sin ambig√ºedad en intenciones.</li>
                        <li>Protecci√≥n contra perfiles falsos o usuarios fantasma.</li>
                    </ul>
                </div>

                <h4 style="margin: 20px 0 10px;">¬øC√≥mo quieres participar?</h4>

                <div class="role-selector">
                    <div class="role-card" onclick="app.selectRole('OFERENTE')">
                        <div class="role-icon">üë∏</div>
                        <h4>Organizadora</h4>
                        <p>Deseo crear y gestionar mis propios eventos exclusivos.</p>
                    </div>
                    <div class="role-card" onclick="app.selectRole('BUSCADOR')">
                        <div class="role-icon">üïµÔ∏è</div>
                        <h4>Buscador</h4>
                        <p>Deseo postularme a experiencias √∫nicas y verificadas.</p>
                    </div>
                </div>
                <!-- Input oculto para guardar selecci√≥n -->
                <input type="hidden" id="reg-role">

                <div class="wizard-actions">
                    <button type="button" class="btn btn-text" onclick="app.cancelRegistration()">Cancelar</button>
                </div>
            </div>

            <!-- Step Rules: Normas y Responsabilidades (Nuevo) -->
            <div class="wizard-step" id="reg-step-rules">
                <h3 id="rules-title">Normas de la Comunidad</h3>
                <div class="rules-container" id="rules-content"
                    style="max-height: 400px; overflow-y: auto; text-align: left; margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                    <!-- Content injected by JS -->
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="app.showWizardStep(1)">Atr√°s</button>
                    <button type="button" class="btn btn-primary" onclick="app.acceptRules()">He le√≠do y acepto las
                        normas</button>
                </div>
            </div>

            <!-- WIZARD PASO 2: DATOS DE CUENTA -->
            <div id="reg-step-2" class="wizard-step">
                <form id="reg-form-data" onsubmit="app.submitStep2(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="reg-email" required>
                    </div>
                    <div class="form-group">
                        <label>Contrase√±a</label>
                        <input type="password" id="reg-password" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label>Nombre Completo (Privado)</label>
                        <input type="text" id="reg-fullname" required placeholder="Para verificaci√≥n interna">
                    </div>
                    <div class="form-group">
                        <label>Nombre de Usuario (P√∫blico)</label>
                        <input type="text" id="reg-username" required placeholder="Tu alias en la app">
                    </div>
                    <div class="row-2">
                        <div class="form-group">
                            <label>Fecha Nacimiento</label>
                            <input type="date" id="reg-birthdate" required>
                        </div>
                        <div class="form-group">
                            <label>Provincia</label>
                            <select id="reg-province" required>
                                <option value="">Selecciona</option>
                                <option value="Madrid">Madrid</option>
                                <option value="Barcelona">Barcelona</option>
                                <option value="Valencia">Valencia</option>
                                <option value="Sevilla">Sevilla</option>
                                <option value="Otra">Otra</option>
                            </select>
                        </div>
                    </div>

                    <div class="wizard-actions">
                        <button type="button" class="btn btn-secondary" onclick="app.prevStep()">Atr√°s</button>
                        <button type="submit" class="btn btn-primary">Siguiente</button>
                    </div>
                </form>
            </div>

            <!-- WIZARD PASO 3: VERIFICACI√ìN -->
            <div id="reg-step-3" class="wizard-step">
                <div class="info-box">
                    <p>üîí <strong>Verificaci√≥n Obligatoria</strong></p>
                    <p class="small">Para mantener la seguridad de la comunidad, necesitamos validar tu identidad. Estas
                        fotos NO ser√°n p√∫blicas, solo para administraci√≥n.</p>
                </div>

                <div class="upload-grid">
                    <div class="upload-zone" onclick="document.getElementById('reg-photo-face').click()">
                        <div id="preview-face" class="upload-preview">üì∏</div>
                        <p>Foto de Rostro</p>
                        <input type="file" id="reg-photo-face" hidden accept="image/*"
                            onchange="app.handleRegPhoto('face', this)">
                    </div>

                    <div class="upload-zone" onclick="document.getElementById('reg-photo-id').click()">
                        <div id="preview-id" class="upload-preview">ü™™</div>
                        <p>Selfie con DNI</p>
                        <input type="file" id="reg-photo-id" hidden accept="image/*"
                            onchange="app.handleRegPhoto('id', this)">
                    </div>
                </div>

                <div class="wizard-actions">
                    <button type="button" class="btn btn-secondary" onclick="app.prevStep()">Atr√°s</button>
                    <button type="button" class="btn btn-primary" onclick="app.finishRegistration()">Enviar
                        Solicitud</button>
                </div>
            </div>

            <!-- WIZARD PASO 4: PENDIENTE -->
            <div id="reg-step-4" class="wizard-step">
                <div class="success-message">
                    <div class="icon-pulse">‚è≥</div>
                    <h3>Solicitud Enviada</h3>
                    <p>Hemos recibido tus datos correctamente.</p>
                    <div class="info-card">
                        <p>Un administrador humano revisar√° tu perfil en breve.</p>
                        <p>Recibir√°s un email cuando tu cuenta sea activada.</p>
                    </div>
                    <button class="btn btn-primary btn-block" onclick="location.reload()">Entendido</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Modal: Detalles de Evento -->
    <div id="event-detail-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 id="event-detail-title">Detalles del Evento</h2>
                <button class="modal-close" onclick="app.closeEventDetail()">‚úï</button>
            </div>
            <div id="event-detail-content">
                <!-- Se llenar√° din√°micamente -->
            </div>
            <div class="modal-footer" id="event-detail-actions">
                <!-- Botones de acci√≥n din√°micos -->
            </div>
        </div>
    </div>

    <!-- Modal: Crear Evento -->
    <div id="create-event-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>Crear Nuevo Evento</h2>
                <button class="modal-close" onclick="app.closeCreateEvent()">‚úï</button>
            </div>
            <form id="create-event-form" onsubmit="app.handleCreateEvent(event)">
                <div class="form-group">
                    <label for="event-title">T√≠tulo del Evento</label>
                    <input type="text" id="event-title" required>
                </div>
                <div class="form-group">
                    <label for="event-description">Descripci√≥n</label>
                    <textarea id="event-description" rows="4" required></textarea>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
                    <div class="form-group">
                        <label for="event-date">Fecha</label>
                        <input type="date" id="event-date" required>
                    </div>
                    <div class="form-group">
                        <label for="event-time">Hora</label>
                        <input type="time" id="event-time" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Nivel del Gangbang</label>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-md);">
                        <label class="level-card">
                            <input type="radio" name="gangbang-level" value="TRADICIONAL" required>
                            <div class="level-content">
                                <span>üåä</span>
                                <strong>Tradicional</strong>
                                <small>Fluido y espont√°neo</small>
                            </div>
                        </label>
                        <label class="level-card">
                            <input type="radio" name="gangbang-level" value="SUMISO">
                            <div class="level-content">
                                <span>‚ö°</span>
                                <strong>Sumiso</strong>
                                <small>Rol sumiso potenciado</small>
                            </div>
                        </label>
                        <label class="level-card">
                            <input type="radio" name="gangbang-level" value="ESTRUCTURADO">
                            <div class="level-content">
                                <span>üìã</span>
                                <strong>Estructurado</strong>
                                <small>Orden y turnos definidos</small>
                            </div>
                        </label>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
                    <div class="form-group">
                        <label for="event-capacity">Capacidad M√°xima</label>
                        <input type="number" id="event-capacity" min="2" max="50" required>
                    </div>
                    <div class="form-group">
                        <label for="event-zone">Zona Aproximada</label>
                        <select id="event-zone" required>
                            <option value="">Seleccionar zona</option>
                            <option value="norte">Zona Norte</option>
                            <option value="sur">Zona Sur</option>
                            <option value="este">Zona Este</option>
                            <option value="oeste">Zona Oeste</option>
                            <option value="centro">Centro</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="event-location">Ubicaci√≥n Exacta (solo visible para aceptados)</label>
                    <input type="text" id="event-location" required>
                </div>
                <div class="form-group">
                    <label for="event-rules">Reglas del Encuentro</label>
                    <textarea id="event-rules" rows="3"
                        placeholder="Ej: Uso obligatorio de protecci√≥n, respeto mutuo, etc."></textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Publicar Evento</button>
            </form>
        </div>
    </div>

    <!-- Modal: Valorar Participantes -->
    <div id="rate-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Valorar participantes</h2>
                <button class="modal-close" onclick="app.closeRateModal()">‚úï</button>
            </div>
            <div id="rate-content">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>



    <!-- Modal: Editar Perfil -->
    <div id="edit-profile-modal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: var(--spacing-md);">Editar Perfil</h2>
            <form id="edit-profile-form" onsubmit="app.handleProfileEdit(event)">
                <div class="form-group" style="text-align: center;">
                    <label class="form-label">Avatar</label>
                    <img id="edit-avatar-preview" src=""
                        style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 10px;">
                    <br>
                    <button type="button" class="btn btn-secondary btn-small"
                        onclick="document.getElementById('avatar-upload').click()">Cambiar Foto</button>
                    <input type="file" id="avatar-upload" hidden accept="image/*"
                        onchange="app.handleImageUpload('avatar', this)">
                </div>

                <div class="form-group">
                    <label class="form-label">Bio / Sobre m√≠</label>
                    <textarea class="form-input" name="bio" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Zonas de Inter√©s</label>
                    <div class="checkbox-group" style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <label><input type="checkbox" name="zones" value="norte"> Norte</label>
                        <label><input type="checkbox" name="zones" value="sur"> Sur</label>
                        <label><input type="checkbox" name="zones" value="este"> Este</label>
                        <label><input type="checkbox" name="zones" value="oeste"> Oeste</label>
                        <label><input type="checkbox" name="zones" value="centro"> Centro</label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Galer√≠a de Fotos (M√°x 4)</label>
                    <div id="gallery-preview" style="display: flex; gap: 5px; margin-bottom: 10px;"></div>
                    <button type="button" class="btn btn-secondary btn-small"
                        onclick="document.getElementById('gallery-upload').click()">A√±adir Foto a Galer√≠a</button>
                    <input type="file" id="gallery-upload" hidden accept="image/*"
                        onchange="app.handleImageUpload('gallery', this)">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-text" onclick="app.toggleProfileEdit()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Editar Usuario (Admin) -->
    <div id="admin-edit-user-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Editar Usuario (Admin)</h2>
                <button class="close-btn"
                    onclick="document.getElementById('admin-edit-user-modal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="admin-user-edit-form" onsubmit="app.saveUserEdits(event)">
                    <input type="hidden" name="userId">

                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" name="username" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input" readonly
                            style="opacity: 0.5; background: rgba(255,255,255,0.05);">
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Rol</label>
                            <select name="role" class="form-input">
                                <option value="BUSCADOR">BUSCADOR</option>
                                <option value="OFERENTE">OFERENTE</option>
                                <option value="ADMIN">ADMIN</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Estado</label>
                            <select name="verified" class="form-input">
                                <option value="PENDIENTE">PENDIENTE</option>
                                <option value="VERIFICADO">VERIFICADO</option>
                                <option value="RECHAZADO">RECHAZADO</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Biograf√≠a</label>
                        <textarea name="bio" class="form-input" rows="3"></textarea>
                    </div>

                    <!-- MODERACI√ìN DE FOTOS -->
                    <div class="form-group">
                        <label class="form-label">Moderaci√≥n de Fotos</label>
                        <div style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                            <p style="font-size: 0.9em; margin-bottom: 5px;">Avatar:</p>
                            <div id="admin-edit-avatar-container"
                                style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                                <!-- Se llena din√°micamente -->
                            </div>

                            <p style="font-size: 0.9em; margin-bottom: 5px;">Galer√≠a:</p>
                            <div id="admin-edit-gallery-container" style="display: flex; flex-wrap: wrap; gap: 10px;">
                                <!-- Se llena din√°micamente -->
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary"
                            onclick="document.getElementById('admin-edit-user-modal').classList.remove('active')">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Participantes del Evento (Admin) -->
    <div id="admin-event-participants-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Historial de Participantes</h2>
                <button class="close-btn"
                    onclick="document.getElementById('admin-event-participants-modal').classList.remove('active')">&times;</button>
            </div>
            <div class="modal-body">
                <h4 id="admin-event-title-participants" style="margin-bottom: 15px; color: var(--color-accent);"></h4>
                <div id="admin-event-participants-list" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Lista din√°mica -->
                    <p style="text-align: center;">Cargando...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Imagen ampliada -->
    <div id="image-modal" class="modal" onclick="app.closeImageModal()">
        <div class="modal-content"
            style="max-width: 90vw; max-height: 90vh; background: transparent; box-shadow: none; padding: 0;">
            <img id="image-modal-img" src=""
                style="max-width: 100%; max-height: 90vh; object-fit: contain; border-radius: var(--border-radius-lg);">
        </div>
    </div>

    <!-- Modal: Ver Post del Blog -->
    <div id="blog-post-modal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <button class="close-modal" onclick="app.closeBlogPost()">‚úï</button>
            </div>
            <div id="blog-post-content" class="blog-post-full">
                <!-- Contenido del post -->
            </div>
        </div>
    </div>

    <!-- Modal: Crear/Editar Post (Admin) -->
    <div id="create-blog-post-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 id="blog-form-title">Crear Nuevo Post</h2>
                <button class="close-modal" onclick="app.closeCreateBlogPost()">‚úï</button>
            </div>
            <form id="blog-post-form" onsubmit="app.handleBlogPostSubmit(event)">
                <div class="form-group">
                    <label for="blog-title">T√≠tulo</label>
                    <input type="text" id="blog-title" required placeholder="T√≠tulo del post">
                </div>
                <div class="form-group">
                    <label for="blog-excerpt">Extracto</label>
                    <textarea id="blog-excerpt" rows="2" placeholder="Breve descripci√≥n"></textarea>
                </div>
                <div class="form-group">
                    <label for="blog-content">Contenido</label>
                    <textarea id="blog-content" rows="10" required placeholder="Contenido completo"></textarea>
                </div>
                <div class="form-group">
                    <label for="blog-cover-image">URL Imagen</label>
                    <input type="url" id="blog-cover-image" placeholder="https://ejemplo.com/imagen.jpg">
                </div>
                <div class="form-group" style="display: flex; align-items: center; gap: var(--spacing-md);">
                    <input type="checkbox" id="blog-published" style="width: auto;">
                    <label for="blog-published" style="margin: 0;">Publicar inmediatamente</label>
                </div>
                <input type="hidden" id="blog-post-id">
                <div style="display: flex; gap: var(--spacing-sm); margin-top: var(--spacing-lg);">
                    <button type="button" class="btn btn-secondary"
                        onclick="app.closeCreateBlogPost()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-service.js?v=2.0"></script>

    <!-- App Scripts (Legacy DataService can be kept as fallback or removed later) -->
    <script src="data.js"></script>
    <script src="app-new-complete.js?v=4.0"></script>
    <script src="applicants-manager.js?v=1.6"></script>
</body>

</html>